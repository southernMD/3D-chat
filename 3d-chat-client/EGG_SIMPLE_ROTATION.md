# å½©è›‹ç®€åŒ– - çº¯å‡€é¸¡è›‹æ¨¡å‹ + éšæœºæ—‹è½¬

## æ¦‚è¿°
ç®€åŒ–å½©è›‹ç³»ç»Ÿï¼Œç§»é™¤æ‰€æœ‰å¤æ‚çš„å…‰çº¿ã€å‘å…‰ã€é—ªçƒæ•ˆæœï¼Œåªä¿ç•™çº¯å‡€çš„é¸¡è›‹3Dæ¨¡å‹å’Œç®€å•çš„éšæœºæ—‹è½¬åŠ¨ç”»ã€‚

## ç®€åŒ–å†…å®¹

### ç§»é™¤çš„æ•ˆæœ
- âŒ ç‚¹å…‰æº (PointLight)
- âŒ å…‰çº¿å°„çº¿æ•ˆæœ
- âŒ å‘å…‰å…‰æ™•
- âŒ æè´¨å‘å…‰æ•ˆæœ
- âŒ å¤æ‚çš„é—ªçƒåŠ¨ç”»
- âŒ å…‰æºå¼ºåº¦å˜åŒ–
- âŒ é€æ˜åº¦å˜åŒ–
- âŒ å¤šå±‚åŠ¨ç”»æ•ˆæœ

### ä¿ç•™çš„åŠŸèƒ½
- âœ… çœŸå®çš„3Dé¸¡è›‹æ¨¡å‹
- âœ… ç®€å•çš„éšæœºæ—‹è½¬
- âœ… åŸºæœ¬çš„èµ„æºç®¡ç†
- âœ… å½©è›‹åˆ›å»ºå’Œæ¸…ç†

## æ ¸å¿ƒå®ç°

### 1. ç®€åŒ–çš„å½©è›‹åˆ›å»º
```typescript
private insertEggIntoScene(id: string, x: number, y: number, z: number) {
  // è·å–é¸¡è›‹æ¨¡å‹å®ä¾‹
  const eggModel = Egg.getEggInstance()
  
  // è®¾ç½®åŸºæœ¬å±æ€§
  eggModel.name = `egg_${id}`
  eggModel.userData = { type: 'egg', id: id }
  eggModel.position.set(x, y, z)
  eggModel.scale.set(1, 1, 1)
  
  // ç›´æ¥æ·»åŠ åˆ°åœºæ™¯
  this.scene.add(eggModel)
  
  // ä¿å­˜å¼•ç”¨
  this.eggs.set(id, eggModel)
}
```

### 2. éšæœºæ—‹è½¬åŠ¨ç”»
```typescript
// ç”Ÿæˆéšæœºæ—‹è½¬é€Ÿåº¦
const rotationSpeed = {
  x: (Math.random() - 0.5) * 0.04, // -0.02 åˆ° 0.02
  y: (Math.random() - 0.5) * 0.04,
  z: (Math.random() - 0.5) * 0.04
}

// ç®€å•çš„æ—‹è½¬åŠ¨ç”»
const animate = () => {
  if (this.eggs.has(id)) {
    eggModel.rotation.x += rotationSpeed.x
    eggModel.rotation.y += rotationSpeed.y
    eggModel.rotation.z += rotationSpeed.z
    
    requestAnimationFrame(animate)
  }
}
```

### 3. ç®€åŒ–çš„èµ„æºæ¸…ç†
```typescript
clearEgg(eggId: string): boolean {
  const eggModel = this.eggs.get(eggId)
  if (eggModel) {
    // ä»åœºæ™¯ç§»é™¤
    this.scene.remove(eggModel)
    
    // æ¸…ç†èµ„æº
    eggModel.traverse((child) => {
      if (child instanceof THREE.Mesh) {
        child.geometry.dispose()
        // æ¸…ç†æè´¨...
      }
    })
    
    // æ¸…ç†å¼•ç”¨
    this.eggs.delete(eggId)
    this.eggAnimations.delete(eggId)
  }
}
```

## æŠ€æœ¯ç‰¹ç‚¹

### 1. æ•°æ®ç»“æ„ç®€åŒ–
```typescript
// ä¿®æ”¹å‰ï¼šå­˜å‚¨å¤æ‚çš„ç»„
private eggs: Map<string, THREE.Group> = new Map()

// ä¿®æ”¹åï¼šç›´æ¥å­˜å‚¨æ¨¡å‹
private eggs: Map<string, THREE.Object3D> = new Map()
```

### 2. éšæœºæ€§
- **æ—‹è½¬è½´**ï¼šXã€Yã€Zè½´éƒ½æœ‰éšæœºæ—‹è½¬
- **æ—‹è½¬é€Ÿåº¦**ï¼šæ¯ä¸ªè½´çš„é€Ÿåº¦éƒ½æ˜¯éšæœºçš„
- **æ—‹è½¬æ–¹å‘**ï¼šå¯èƒ½æ­£å‘æˆ–åå‘æ—‹è½¬

### 3. æ€§èƒ½ä¼˜åŒ–
- **æ— å…‰æºè®¡ç®—**ï¼šä¸éœ€è¦å…‰ç…§è®¡ç®—
- **æ— å¤æ‚æè´¨**ï¼šä½¿ç”¨åŸå§‹æè´¨
- **ç®€å•åŠ¨ç”»**ï¼šåªæœ‰åŸºç¡€çš„æ—‹è½¬è®¡ç®—
- **å†…å­˜å‹å¥½**ï¼šæœ€å°çš„èµ„æºå ç”¨

## æ—‹è½¬å‚æ•°

### é€Ÿåº¦èŒƒå›´
```typescript
const rotationSpeed = {
  x: (Math.random() - 0.5) * 0.04, // -0.02 åˆ° +0.02 å¼§åº¦/å¸§
  y: (Math.random() - 0.5) * 0.04, // -0.02 åˆ° +0.02 å¼§åº¦/å¸§  
  z: (Math.random() - 0.5) * 0.04  // -0.02 åˆ° +0.02 å¼§åº¦/å¸§
}
```

### å¯è°ƒèŠ‚å‚æ•°
```typescript
const ROTATION_SPEED_MULTIPLIER = 0.04  // æ—‹è½¬é€Ÿåº¦å€æ•°
const MIN_ROTATION_SPEED = -0.02         // æœ€å°æ—‹è½¬é€Ÿåº¦
const MAX_ROTATION_SPEED = 0.02          // æœ€å¤§æ—‹è½¬é€Ÿåº¦
```

## è§†è§‰æ•ˆæœ

### ç®€æ´ç¾è§‚
- **çº¯å‡€æ¨¡å‹**ï¼šå±•ç¤ºé¸¡è›‹çš„åŸå§‹3Dæ¨¡å‹ç»†èŠ‚
- **è‡ªç„¶æ—‹è½¬**ï¼šéšæœºçš„å¤šè½´æ—‹è½¬çœ‹èµ·æ¥å¾ˆè‡ªç„¶
- **æ— å¹²æ‰°**ï¼šæ²¡æœ‰å…‰çº¿å’Œç‰¹æ•ˆçš„å¹²æ‰°

### æ€§èƒ½å‹å¥½
- **ä½CPUå ç”¨**ï¼šåªæœ‰ç®€å•çš„æ—‹è½¬è®¡ç®—
- **ä½GPUå ç”¨**ï¼šæ— å…‰ç…§å’Œç‰¹æ•ˆæ¸²æŸ“
- **ä½å†…å­˜å ç”¨**ï¼šæœ€å°çš„èµ„æºä½¿ç”¨

### å…¼å®¹æ€§å¥½
- **è®¾å¤‡å‹å¥½**ï¼šåœ¨ä½ç«¯è®¾å¤‡ä¸Šä¹Ÿèƒ½æµç•…è¿è¡Œ
- **æµè§ˆå™¨å…¼å®¹**ï¼šä¸ä¾èµ–é«˜çº§WebGLç‰¹æ€§
- **ç¨³å®šå¯é **ï¼šç®€å•çš„å®ç°ä¸å®¹æ˜“å‡ºé”™

## ä½¿ç”¨åœºæ™¯

### 1. æ€§èƒ½ä¼˜å…ˆ
- ä½ç«¯è®¾å¤‡
- ç§»åŠ¨ç«¯æµè§ˆå™¨
- å¤§é‡å½©è›‹åœºæ™¯

### 2. ç®€æ´é£æ ¼
- æç®€ä¸»ä¹‰è®¾è®¡
- ä¸“æ³¨æ¸¸æˆç©æ³•
- å‡å°‘è§†è§‰å¹²æ‰°

### 3. ç¨³å®šæ€§è¦æ±‚
- ç”Ÿäº§ç¯å¢ƒ
- é•¿æ—¶é—´è¿è¡Œ
- å…³é”®ä¸šåŠ¡åœºæ™¯

## æ‰©å±•å¯èƒ½

### 1. æ—‹è½¬å¢å¼º
```typescript
// å¯ä»¥æ·»åŠ æ›´å¤æ‚çš„æ—‹è½¬æ¨¡å¼
const rotationPattern = Math.random() > 0.5 ? 'clockwise' : 'counterclockwise'
const rotationAxis = ['x', 'y', 'z'][Math.floor(Math.random() * 3)]
```

### 2. ä½ç½®åŠ¨ç”»
```typescript
// å¯ä»¥æ·»åŠ è½»å¾®çš„ä½ç½®æµ®åŠ¨
eggModel.position.y += Math.sin(time) * 0.1
```

### 3. ç¼©æ”¾åŠ¨ç”»
```typescript
// å¯ä»¥æ·»åŠ å‘¼å¸æ•ˆæœ
const scale = 1 + Math.sin(time) * 0.05
eggModel.scale.set(scale, scale, scale)
```

## å¯¹æ¯”æ€»ç»“

### ä¿®æ”¹å‰ï¼ˆå¤æ‚ç‰ˆæœ¬ï¼‰
- ğŸ”´ å¤šå±‚å…‰çº¿æ•ˆæœ
- ğŸ”´ å¤æ‚åŠ¨ç”»ç³»ç»Ÿ
- ğŸ”´ é«˜æ€§èƒ½è¦æ±‚
- ğŸ”´ èµ„æºå ç”¨å¤§

### ä¿®æ”¹åï¼ˆç®€åŒ–ç‰ˆæœ¬ï¼‰
- ğŸŸ¢ çº¯å‡€é¸¡è›‹æ¨¡å‹
- ğŸŸ¢ ç®€å•éšæœºæ—‹è½¬
- ğŸŸ¢ ä½æ€§èƒ½è¦æ±‚
- ğŸŸ¢ èµ„æºå ç”¨å°
- ğŸŸ¢ ç¨³å®šå¯é 

ç°åœ¨å½©è›‹ç³»ç»Ÿå˜å¾—éå¸¸ç®€æ´å’Œé«˜æ•ˆï¼Œåªæœ‰çº¯å‡€çš„3Dé¸¡è›‹æ¨¡å‹åœ¨éšæœºæ—‹è½¬ï¼ğŸ¥šğŸ”„
